#!/bin/bash

# ==============================================================================
#  –ü–†–û–í–ï–†–ö–ê –°–¢–ê–¢–ò–ß–ï–°–ö–ò–• –§–ê–ô–õ–û–í
# ==============================================================================

echo "üîç –ü–†–û–í–ï–†–Ø–ï–ú –°–¢–ê–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ô–õ–´..."

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/kod-bezopasnosti

echo "--- [–®–ê–ì 1/6] –ü–†–û–í–ï–†–Ø–ï–ú –°–¢–†–£–ö–¢–£–†–£ –ü–†–û–ï–ö–¢–ê ---"
echo "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:"
ls -la

echo ""
echo "--- [–®–ê–ì 2/6] –ü–†–û–í–ï–†–Ø–ï–ú –°–¢–ê–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ô–õ–´ ---"
echo "–ü–∞–ø–∫–∞ static:"
ls -la static/ 2>/dev/null || echo "–ü–∞–ø–∫–∞ static –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

echo ""
echo "–ü–∞–ø–∫–∞ staticfiles:"
ls -la staticfiles/ 2>/dev/null || echo "–ü–∞–ø–∫–∞ staticfiles –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

echo ""
echo "--- [–®–ê–ì 3/6] –ü–†–û–í–ï–†–Ø–ï–ú CSS –§–ê–ô–õ–´ ---"
echo "CSS —Ñ–∞–π–ª—ã –≤ static:"
find static/ -name "*.css" 2>/dev/null || echo "CSS —Ñ–∞–π–ª—ã –≤ static –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"

echo ""
echo "CSS —Ñ–∞–π–ª—ã –≤ staticfiles:"
find staticfiles/ -name "*.css" 2>/dev/null || echo "CSS —Ñ–∞–π–ª—ã –≤ staticfiles –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"

echo ""
echo "--- [–®–ê–ì 4/6] –ü–†–û–í–ï–†–Ø–ï–ú JS –§–ê–ô–õ–´ ---"
echo "JS —Ñ–∞–π–ª—ã –≤ static:"
find static/ -name "*.js" 2>/dev/null || echo "JS —Ñ–∞–π–ª—ã –≤ static –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"

echo ""
echo "JS —Ñ–∞–π–ª—ã –≤ staticfiles:"
find staticfiles/ -name "*.js" 2>/dev/null || echo "JS —Ñ–∞–π–ª—ã –≤ staticfiles –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"

echo ""
echo "--- [–®–ê–ì 5/6] –ü–†–û–í–ï–†–Ø–ï–ú –î–û–°–¢–£–ü–ù–û–°–¢–¨ –ß–ï–†–ï–ó HTTP ---"
echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å CSS:"
curl -I http://91.229.8.148/static/css/style.css 2>/dev/null || echo "CSS —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

echo ""
echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å JS:"
curl -I http://91.229.8.148/static/js/main.js 2>/dev/null || echo "JS —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

echo ""
echo "--- [–®–ê–ì 6/6] –ü–†–û–í–ï–†–Ø–ï–ú –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Æ NGINX ---"
echo "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx:"
cat /etc/nginx/sites-available/kod-bezopasnosti.ru | grep -A 10 "location /static/"

echo ""
echo "========================================================"
echo "‚úÖ –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!"
echo ""
echo "–ï—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã, –∑–∞–ø—É—Å—Ç–∏:"
echo "  ./fix_static_files.sh"
echo "========================================================"
