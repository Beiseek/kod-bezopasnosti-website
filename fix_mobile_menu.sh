#!/bin/bash

echo "üì± –ò–°–ü–†–ê–í–õ–Ø–ï–ú –ú–û–ë–ò–õ–¨–ù–û–ï –ú–ï–ù–Æ..."

# --- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ---
PROJECT_DIR="/var/www/kod-bezopasnosti"
USER="www-data"

echo "--- [–®–ê–ì 1/6] –û–°–¢–ê–ù–û–í–ö–ê –°–õ–£–ñ–ë ---"
supervisorctl stop kodbezopasnosti

echo "--- [–®–ê–ì 2/6] –ü–ï–†–ï–•–û–î –í –ü–ê–ü–ö–£ –ü–†–û–ï–ö–¢–ê ---"
cd $PROJECT_DIR

echo "--- [–®–ê–ì 3/6] –ê–ö–¢–ò–í–ê–¶–ò–Ø –í–ò–†–¢–£–ê–õ–¨–ù–û–ì–û –û–ö–†–£–ñ–ï–ù–ò–Ø ---"
source venv/bin/activate

echo "--- [–®–ê–ì 4/6] –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–û–î–ê –ò–ó GITHUB ---"
git pull origin main

echo "--- [–®–ê–ì 5/6] –°–û–ë–ò–†–ê–ï–ú –°–¢–ê–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ô–õ–´ ---"
python manage.py collectstatic --noinput

echo "--- [–®–ê–ì 6/6] –ó–ê–ü–£–°–ö–ê–ï–ú –°–õ–£–ñ–ë–´ ---"
supervisorctl start kodbezopasnosti

echo "========================================================"
echo "‚úÖ –ú–û–ë–ò–õ–¨–ù–û–ï –ú–ï–ù–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û!"
echo ""
echo "–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:"
echo "1. ‚úÖ –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –∫–Ω–æ–ø–∫–∞ —Ç–µ–ø–µ—Ä—å –≤ –∫–æ–ª–æ–Ω–∫—É"
echo "2. ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É"
echo "3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω CSS –¥–æ –≤–µ—Ä—Å–∏–∏ 2.8"
echo ""
echo "–ü—Ä–æ–≤–µ—Ä—å –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º: üì± http://91.229.8.148/"
echo "========================================================"
